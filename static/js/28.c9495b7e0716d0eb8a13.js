webpackJsonp([28],{1304:function(e,t,a){"use strict";function r(e){a(1741)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1430),s=a(1743),o=a(1),i=r,l=o(n.a,s.a,!1,i,"data-v-5c0697ce",null);t.default=l.exports},1306:function(e,t,a){"use strict";var r=a(8),n=a.n(r),s=a(14),o=a(548);t.a={name:"ContentHeader",components:{Breadcrumb:o.a},props:{title:{type:String,default:""},theme:{type:String,default:"dark"},subTitle:{type:String,default:""},isBgColor:{type:Boolean,default:!1},isCustomHeader:{type:Boolean,default:!1}},computed:n()({},Object(s.c)(["showBreadcrumb","showPageHeader","layout","headerBg"]),{isTopNav:function(){return this.layout.TopNav},bgColor:function(){return this.isBgColor?"background-color: "+this.headerBg+" !important":""},textTheme:function(){return"text-"+this.theme}})}},1307:function(e,t,a){"use strict";function r(e){a(1308)}var n=a(1306),s=a(1310),o=a(1),i=r,l=o(n.a,s.a,!1,i,"data-v-814708de",null);t.a=l.exports},1308:function(e,t,a){var r=a(1309);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(1245)("5c048589",r,!0,{})},1309:function(e,t,a){t=e.exports=a(1244)(!0),t.push([e.i,".breadcrumb-container[data-v-814708de]{float:right}","",{version:3,sources:["E:/Github/vue-adminLte/src/layout/components/Content/ContentHeader.vue"],names:[],mappings:"AACA,uCACE,WAAa,CACd",file:"ContentHeader.vue",sourcesContent:["\n.breadcrumb-container[data-v-814708de] {\n  float: right;\n}\n"],sourceRoot:""}])},1310:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"fade",mode:"out-in"}},[e.showPageHeader?a("div",{staticClass:"content-header",style:e.bgColor},[a("div",{class:e.isTopNav?"container":"container-fluid"},[a("div",{staticClass:"row sm-2"},[a("div",{staticClass:"col-sm-6"},[a("h1",{staticClass:"m-0 ",class:e.textTheme},[e._v(e._s(e.title)+" "),a("small",{class:e.textTheme},[e._v(e._s(e.subTitle))])]),e._v(" "),e.isCustomHeader?e._t("headerLeft"):e._e()],2),e._v(" "),a("div",{staticClass:"col-sm-6"},[e.showBreadcrumb||e.isCustomHeader?e._e():a("breadcrumb",{staticClass:"breadcrumb-container",attrs:{separator:"",separatorClass:"el-icon-caret-right",isHeader:!0}}),e._v(" "),e.isCustomHeader?e._t("headerRight"):e._e()],2)])])]):e._e()])},n=[],s={render:r,staticRenderFns:n};t.a=s},1430:function(e,t,a){"use strict";var r=a(69),n=a.n(r),s=a(8),o=a.n(s),i=a(182),l=a.n(i),c=a(37),d=a.n(c),u=a(38),v=a.n(u),h=a(92),f=a.n(h),p=a(1307),m=a(29),g=a(71),C=a(94),b=a.n(C),y={key:"",name:"",description:"",routes:[]};t.a={name:"role",components:{ContentHeader:p.a},data:function(){return{headers:[{text:"Role Key",value:"roleKey"},{text:"Role Name",value:"roleName"},{text:"Description",value:"desc"},{text:"Operation",value:"operation"}],role:f()({},y),rolesList:[],routes:[],serviceRoutes:[],dialogType:"new",checkStrictly:!1,defaultProps:{children:"children",label:"title"}}},computed:{routesData:function(){return this.routes},modalType:function(){return"edit"===this.dialogType?"Edit Role":"New Role"}},created:function(){this.getRoutes(),this.getRoles()},methods:{getRoles:function(){var e=this;return v()(d.a.mark(function t(){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.d.getAll();case 2:a=t.sent,e.rolesList=a.data;case 4:case"end":return t.stop()}},t,e)}))()},getRoutes:function(){var e=this;return v()(d.a.mark(function t(){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.d.getRoutes();case 2:a=t.sent,e.serviceRoutes=a.data,e.routes=e.generateRoutes(a.data);case 5:case"end":return t.stop()}},t,e)}))()},generateRoutes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",a=[],r=!0,n=!1,s=void 0;try{for(var o,i=l()(e);!(r=(o=i.next()).done);r=!0){var c=o.value;if(!c.hidden){var d=this.onlyOneShowingChild(c.children,c);c.children&&d&&!c.alwaysShow&&(c=d);var u={path:b.a.resolve(t,c.path),title:c.meta&&c.meta.title};c.children&&(u.children=this.generateRoutes(c.children,u.path)),a.push(u)}}}catch(e){n=!0,s=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw s}}return a},onlyOneShowingChild:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],a=null,r=e.filter(function(e){return!e.hidden});return 1===r.length?(a=r[0],a.path=b.a.resolve(t.path,a.path),a):0===r.length&&(a=o()({},t,{path:"",noShowingChildren:!0}))},handleAddRole:function(){this.role=f()({},y),this.$refs.tree&&this.$refs.tree.setCheckedNodes([]),this.dialogType="new"},generateArr:function(e){var t=this,a=[];return e.forEach(function(e){if(a.push(e),e.children){var r=t.generateArr(e.children);r.length>0&&(a=[].concat(n()(a),n()(r)))}}),a},handleEdit:function(e){var t=this;this.dialogType="edit",this.checkStrictly=!0,this.role=Object(g.c)(e),this.$nextTick(function(){var e=t.generateRoutes(t.role.routes);t.$refs.tree.setCheckedNodes(t.generateArr(e)),t.checkStrictly=!1})},handleDelete:function(e,t){var a=this;this.$Swal.fire({title:"Confirm to remove the role?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Confirm"}).then(function(){var r=v()(d.a.mark(function r(n){return d.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!n.value){r.next=3;break}return r.next=3,m.d.delete(t.id).then(function(t){a.$Swal.fire({title:"Info!",text:t.data.message,type:t.data.status}),a.rolesList.splice(e,1)});case 3:case"end":return r.stop()}},r,a)}));return function(e){return r.apply(this,arguments)}}()).catch(function(e){console.error(e)})},generateTree:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",a=arguments[2],r=[],n=!0,s=!1,o=void 0;try{for(var i,c=l()(e);!(n=(i=c.next()).done);n=!0){var d=i.value,u=b.a.resolve(t,d.path);d.children&&(d.children=this.generateTree(d.children,u,a)),(a.includes(u)||d.children&&d.children.length>=1)&&r.push(d)}}catch(e){s=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(s)throw o}}return r},confirmRole:function(){var e=this;return v()(d.a.mark(function t(){var a,r,n,s,o,i,l,c,u;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a="edit"===e.dialogType,r=e.$refs.tree.getCheckedKeys(),e.role.routes=e.generateTree(Object(g.c)(e.serviceRoutes),"/",r),!a){t.next=16;break}return t.next=6,m.d.update(e.role.id,e.role);case 6:n=0;case 7:if(!(n<e.rolesList.length)){t.next=14;break}if(e.rolesList[n].key!==e.role.key){t.next=11;break}return e.rolesList.splice(n,1,f()({},e.role)),t.abrupt("break",14);case 11:n++,t.next=7;break;case 14:t.next=22;break;case 16:return t.next=18,m.d.create(e.role);case 18:s=t.sent,o=s.data,e.role.key=o,e.rolesList.push(e.role);case 22:i=e.role,l=i.description,c=i.key,u=i.name,e.$Toaster.success("<div>Role Key: "+c+"</div><div>Role Name: "+u+"</div><div>Description: "+l+"</div>"),e.$Toaster.options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};case 25:case"end":return t.stop()}},t,e)}))()}}}},1741:function(e,t,a){var r=a(1742);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(1245)("12dd63ac",r,!0,{})},1742:function(e,t,a){t=e.exports=a(1244)(!0),t.push([e.i,".aside-info[data-v-5c0697ce]{background-color:#f9ebaa;padding:8px 16px;border-radius:4px}.permission-tree[data-v-5c0697ce]{margin-bottom:30px;margin-left:40px}","",{version:3,sources:["E:/Github/vue-adminLte/src/views/permission/role.vue"],names:[],mappings:"AACA,6BACI,yBAA0B,AAC1B,iBAAkB,AAClB,iBAAmB,CACtB,AACD,kCACI,mBAAoB,AACpB,gBAAkB,CACrB",file:"role.vue",sourcesContent:["\n.aside-info[data-v-5c0697ce] {\n    background-color: #f9ebaa;\n    padding: 8px 16px;\n    border-radius: 4px;\n}\n.permission-tree[data-v-5c0697ce] {\n    margin-bottom: 30px;\n    margin-left: 40px;\n}\n"],sourceRoot:""}])},1743:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"content"},[a("content-header",{attrs:{title:"Role Permission"}}),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"container-fluid"},[a("va-row",[a("div",{staticClass:"col-md-12"},[a("va-card",{attrs:{WidgetSet:"default",content:"p-0"}},[a("button",{staticClass:"btn btn-primary btn-sm",attrs:{slot:"cardTitle",type:"button ","data-toggle":"modal","data-target":"#modal-role-form"},on:{click:e.handleAddRole},slot:"cardTitle"},[a("i",{staticClass:"fas fa-plus"}),e._v(" New Role\n                        ")]),e._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("table",{staticClass:"table table-striped projects"},[a("thead",[a("tr",e._l(e.headers,function(t){return a("th",{key:t.text},[e._v("\n                                        "+e._s(t.text)+"\n                                    ")])}),0)]),e._v(" "),a("tbody",e._l(e.rolesList,function(t,r){return a("tr",{key:r},e._l(e.headers,function(n){return a("td",{key:n.value},["roleKey"===n.value?[e._v("\n                                            "+e._s(t.key)+"\n                                        ")]:e._e(),e._v(" "),"roleName"===n.value?[e._v("\n                                            "+e._s(t.name)+"\n                                        ")]:e._e(),e._v(" "),"desc"===n.value?[e._v("\n                                            "+e._s(t.description)+"\n                                        ")]:e._e(),e._v(" "),"operation"===n.value?[a("a",{staticClass:"btn btn-info btn-sm",attrs:{href:"#","data-toggle":"modal","data-target":"#modal-role-form"},on:{click:function(a){return e.handleEdit(t)}}},[a("i",{staticClass:"fas fa-pencil-alt"}),e._v("\n                                                Edit\n                                            ")]),e._v(" "),a("a",{staticClass:"btn btn-danger btn-sm",attrs:{href:"#"},on:{click:function(a){return e.handleDelete(r,t)}}},[a("i",{staticClass:"fas fa-trash"}),e._v("\n                                                Delete\n                                            ")])]:e._e()],2)}),0)}),0)]),e._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"modal-role-form",tabindex:"-1",role:"dialog","aria-labelledby":"ModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"ModalTitle"}},[e._v(e._s(e.modalType))]),e._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]),e._v(" "),a("div",{staticClass:"modal-body"},[a("form",{attrs:{model:e.role}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"role-name"}},[e._v("Name:")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.role.name,expression:"role.name"}],staticClass:"form-control",attrs:{type:"text",id:"role-name",placeholder:"Role Name"},domProps:{value:e.role.name},on:{input:function(t){t.target.composing||e.$set(e.role,"name",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"desc-text"}},[e._v("Description:")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.role.description,expression:"role.description"}],staticClass:"form-control",attrs:{id:"desc-text",placeholder:"Role Description"},domProps:{value:e.role.description},on:{input:function(t){t.target.composing||e.$set(e.role,"description",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label"},[e._v("Menus:")]),e._v(" "),a("el-tree",{ref:"tree",staticClass:"permission-tree",attrs:{"check-strictly":e.checkStrictly,data:e.routesData,props:e.defaultProps,"show-checkbox":"","node-key":"path"}})],1)])]),e._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Cancel")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.confirmRole}},[e._v("Confirm")])])])])])])]),e._v(" "),a("aside",{staticClass:"aside-info"},[e._v("\n                        It's only demo CRUD for role table in mirage (our fake backend: see directory BACKEND-fake/mirage/index.js & roles directory).\n                        Changes only for session (not saved in local storage).\n                    ")])],1)])],1)])],1)},n=[],s={render:r,staticRenderFns:n};t.a=s}});
//# sourceMappingURL=28.c9495b7e0716d0eb8a13.js.map